<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gruppe 3 - CoronaHustle</title>
    <link rel="stylesheet" href="../resources/hifi.css">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>
<body>
<div id="content" width="600px" align="center">
    <table id="contentTable" border="2">
        <tr>
            <td>
                <div id="focusBox">
                    <label class="font-heading">Fokus:</label>
                    <label>
                        <select class="font-heading" id="focusSelection">
                            <option>Positiv getestet</option>
                            <option>Todesfälle</option>
                            <option>Hospitalisierte</option>
                            <option>Quarantäne</option>
                            <option>Getestet</option>
                        </select>
                    </label>

                    <br>
                    <br>
                    <div class="font-regularText"> Wählen Sie aus, ob zuerst nach Zeit oder Kanton gefiltert werden soll.</div>
                    <br>
                    <label class="font-heading" id="LabelFilterFirst">1. Zeit</label>
                    <br>
                    <label class="font-heading" id="LabelFilterSecond">2. Kanton</label>
                    <br>
                    <input id="switchPriorityButton" src="../resources/arrows.png" type="image" value="" alt=""/>
                </div>
            </td>

            <td>
                <div id="timeBox">

                    <!--    <div id="yearsBox" class="font-heading">
                            <label id="year2020">2020</label>
                            <label id="year2021">2021</label>

                        </div>-->

                    <g transform="translate(0,400)">
                        <g transform="scale(1,-1)">
                            <svg viewBox="0 0 730 200" id="BarChartBox" onload="">

                                <path class="path1 stroke-black" stroke-width="5" d="M0 200 l857 0"/>

                            </svg>
                        </g>
                    </g>


                    <div id="slider-range"></div>
                    <p class="font-regularText">
                        <label for="amount">Start- / Enddatum:</label>
                        <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                    </p>


                </div>
            </td>

        </tr>
        <tr>
            <td rowspan="2">
                <div id="cantonBox">
                    <div class="lic, reset">
                        <input type="button"
                               value="Auswahl zurücksetzen"
                               class="cantonSelectButton"
                                id="selectionClear"/>
                    </div>

<!--                    <ul id="cantonList">-->
<!--                        <li>-->
<!--                            <div class="liC">-->
<!--                                <svg id="cantonBox1"-->
<!--                                     onclick="toggleRectangleVis('cantonBoxSelection1', 'cantonName1')"-->
<!--                                     width="165" height="40" style="margin:0;">-->
<!--                                    <rect x="0" y="0" width="100%" height="100%" fill="#D3E0EA" style="margin:0;"/>-->
<!--                                    &lt;!&ndash; id="cantonBox1" onclick="cantonBox1.style.stroke='#CA5375';" &ndash;&gt;-->
<!--                                    <rect id="cantonBoxSelection1" visibility="hidden" fill-opacity="0" x="0" y="0"-->
<!--                                          width="100%" height="100%"-->
<!--                                          stroke='#CA5375' stroke-width="5" style="margin:0; visibility:hidden;"/>-->

<!--                                    <text x="20" y="25" style="margin:0;" fill="blue">700</text>-->
<!--                                    <text id="cantonName1" x="80" y="25" style="margin:0;" fill="blue">Aargau</text>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <div class="liC">-->
<!--                                <svg id="cantonBox1"-->
<!--                                     onclick="toggleRectangleVis('cantonBoxSelection2', 'cantonName2')"-->
<!--                                     width="165" height="40" style="margin:0;">-->
<!--                                    <rect x="0" y="0" width="100%" height="100%" fill="#D3E0EA" style="margin:0;"/>-->
<!--                                    <rect id="cantonBoxSelection2" visibility="hidden" fill-opacity="0" x="0" y="0"-->
<!--                                          width="100%" height="100%"-->
<!--                                          stroke='#CA5375' stroke-width="5" style="margin:0; visibility:hidden;"/>-->
<!--                                    <text x="20" y="25" style="margin:0;" fill="blue">600</text>-->
<!--                                    <text id="cantonName2" x="80" y="25" style="margin:0;" fill="blue">Basel-St.</text>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <div class="liC">-->
<!--                                <svg id="cantonBox1"-->
<!--                                     onclick="toggleRectangleVis('cantonBoxSelection3', 'cantonName3')"-->
<!--                                     width="165" height="40" style="margin:0;">-->
<!--                                    <rect x="0" y="0" width="100%" height="100%" fill="#D3E0EA" style="margin:0;"/>-->
<!--                                    <rect id="cantonBoxSelection3" visibility="hidden" fill-opacity="0" x="0" y="0"-->
<!--                                          width="100%" height="100%"-->
<!--                                          stroke='#CA5375' stroke-width="5" style="margin:0; visibility:hidden;"/>-->
<!--                                    <text x="20" y="25" style="margin:0;" fill="blue">500</text>-->
<!--                                    <text id="cantonName3" x="80" y="25" style="margin:0;" fill="blue">Zürich</text>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <div class="liC">-->
<!--                                <svg id="cantonBox1"-->
<!--                                     onclick="toggleRectangleVis('cantonBoxSelection4')"-->
<!--                                     width="165" height="40" style="margin:0;">-->
<!--                                    <rect x="0" y="0" width="100%" height="100%" fill="#D3E0EA" style="margin:0;"/>-->
<!--                                    <rect id="cantonBoxSelection4" visibility="hidden" fill-opacity="0" x="0" y="0"-->
<!--                                          width="100%" height="100%"-->
<!--                                          stroke='#CA5375' stroke-width="5" style="margin:0;"/>-->
<!--                                    <text x="20" y="25" style="margin:0;">...</text>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                        </li>-->
<!--                    </ul>-->
                </div>
            </td>

            <td height="300px">
                <div id="kpiBox">

                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div id="rawdataBox">
                    <table id="rawDataTable" border="1">
                        <tr>
                            <th>
                                Kanton
                            </th>
                            <th>
                                Fokus (Positiv getestet)
                            </th>
                            <th>
                                Hospitalisiert
                            </th>
                            <th>
                                künstlich Beatmet
                            </th>
                            <th>
                                verstorben
                            </th>
                        </tr>
                        <tr>
                            <th>Aargau</th>
                            <td>1500</td>
                            <td>500</td>
                            <td>150</td>
                            <td>400</td>
                        </tr>
                        <tr>
                            <th>Basel-Stadt</th>
                            <td>1000</td>
                            <td>500</td>
                            <td>150</td>
                            <td>400</td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>

</div>

<script type="module">
    import {HustleController}                                                   from "./Controller.js";
    import {FokusView, TimeView, CantonsView, KPIView, DataTableView}           from "./View.js";
    import {id}                                                                 from "./church/church.js";

    //Controllers Initialisieren:
    const controller = HustleController();
    const focusContr = controller.getFokus();
    const timeContr = controller.getTimeSelection();
    const cantonContr = controller.getCantonSelection();
    const dataContr = controller.getDataController(focusContr, cantonContr, timeContr);

    const fokusView     = FokusView     (controller,focusContr, document.getElementById('focusBox'));
    const timeView      = TimeView      (controller,focusContr, cantonContr, timeContr, dataContr, document.getElementById('datesBox'));
    const cantonsView   = CantonsView   (controller,focusContr, cantonContr, timeContr, dataContr , document.getElementById('cantonBox'));
    const kpiView       = KPIView       (controller,focusContr, cantonContr, timeContr, dataContr , document.getElementById('kpiBox'))

    const test = () => {
        cantonContr.clearSelection();
    }

    $(function () {
        $("#slider-range").slider({
            range: true,
            min: 1,
            max: 364,
            values: [1, 364],
            slide: function (event, ui) {
                const startDatum = $("#pillar" + (ui.values[0] - 1)).attr("datum");
                const endDatum = $("#pillar" + (ui.values[1] - 1)).attr("datum");
                $("#amount").val(startDatum + " - " + endDatum);
                timeContr.setStart(startDatum);
                timeContr.setEnd(endDatum);

            }
        });
        $("#amount").val("2020-03-01" +
            " - " + "2021-02-28");
    });

    document.getElementById("selectionClear").onclick = _ => test() ;

</script>

</body>
</html>