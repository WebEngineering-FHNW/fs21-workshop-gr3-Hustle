<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gruppe 3 - CoronaHustle</title>
    <link rel="stylesheet" href="../resources/hifi.css">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>
<body>
<div id="content" width="600px" align="center">
    <table id="contentTable">
        <tr>
            <td>
                <div id="focusBox">
                    <label class="font-heading">Fokus:</label>
                    <label>
                        <select class="font-heading" id="focusSelection">
                            <option>Positiv getestet</option>
                            <option>Todesf채lle</option>
                            <option>Hospitalisierte</option>
                            <option>Quarant채ne</option>
                            <option>Getestet</option>
                        </select>
                    </label>

                    <br>
                    <br>
                    <div class="font-regularText"> W채hlen Sie aus, ob zuerst nach Zeit oder Kanton gefiltert werden soll.</div>
                    <br>
                    <label class="font-heading" id="LabelFilterFirst">1. Zeit</label>
                    <br>
                    <label class="font-heading" id="LabelFilterSecond">2. Kanton</label>
                    <br>
                    <input id="switchPriorityButton" src="../resources/arrows.png" type="image" value="" alt=""/>
                </div>
            </td>

            <td>
                <div id="timeBox">
                    <g transform="translate(0,400)">
                        <g transform="scale(1,-1)">
                            <svg viewBox="0 0 730 200" id="BarChartBox" onload="">

                                <path class="path1 stroke-black" stroke-width="5" d="M0 200 l857 0"/>

                            </svg>
                        </g>
                    </g>

                    <div id="slider-range"></div>
                    <p class="font-regularText">
                        <label for="amount">Start- / Enddatum:</label>
                        <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                    </p>


                </div>
            </td>

        </tr>
        <tr>
            <td rowspan="2">
                <div id="cantonBox">
                    <div class="lic, reset">
                        <input type="button"
                               value="Auswahl zur체cksetzen"
                               class="cantonSelectButton"
                                id="selectionClear"/>
                    </div>
                </div>
            </td>

            <td height="300px">
                <div id="kpiBox">

                </div>
            </td>
        </tr>
        <tr>
            <td id="rawDataTd">
                <div id="rawdataBox">
                </div>
            </td>
        </tr>
    </table>

</div>

<script type="module">
    import {HustleController}                                                   from "./Controller.js";
    import {FokusView, TimeView, CantonsView, KPIView, DataTableView}           from "./View.js";
    import {id}                                                                 from "./church/church.js";

    //Controllers Initialisieren:
    const controller = HustleController();
    const focusContr = controller.getFokus();
    const timeContr = controller.getTimeSelection();
    const cantonContr = controller.getCantonSelection();
    const dataContr = controller.getDataController(focusContr, cantonContr, timeContr);

    const fokusView     = FokusView     (controller,focusContr, document.getElementById('focusBox'));
    const timeView      = TimeView      (controller,focusContr, cantonContr, timeContr, dataContr, document.getElementById('datesBox'));
    const cantonsView   = CantonsView   (controller,focusContr, cantonContr, timeContr, dataContr , document.getElementById('cantonBox'));
    const kpiView       = KPIView       (controller,focusContr, cantonContr, timeContr, dataContr , document.getElementById('kpiBox'))
    const rawDataView   = DataTableView (controller,focusContr, cantonContr, timeContr, dataContr , document.getElementById('rawdataBox'))

    const test = () => {
        cantonContr.clearSelection();
    }

    $(function () {
        $("#slider-range").slider({
            range: true,
            min: 1,
            max: 364,
            values: [1, 364],
            slide: function (event, ui) {
                const startDatum = $("#pillar" + (ui.values[0] - 1)).attr("datum");
                const endDatum = $("#pillar" + (ui.values[1] - 1)).attr("datum");
                $("#amount").val(startDatum + " - " + endDatum);
                timeContr.setStart(startDatum);
                timeContr.setEnd(endDatum);

            }
        });
        $("#amount").val("2020-03-01" +
            " - " + "2021-02-28");
    });

    document.getElementById("selectionClear").onclick = _ => test() ;

</script>

</body>
</html>